{
  "name": "combobox",
  "type": "registry:ui",
  "dependencies": ["react-aria-components"],
  "registryDependencies": [
    "https://jollyui.dev/r/styles/new-york/field.json",
    "https://jollyui.dev/r/styles/new-york/popover.json",
    "https://jollyui.dev/r/styles/new-york/button.json",
    "https://jollyui.dev/r/styles/new-york/list-box.json"
  ],
  "files": [
    {
      "path": "ui/combobox.tsx",
      "content": "'use client';\n\nimport {\n  ComboBox as AriaComboBox,\n  type ComboBoxProps as AriaComboBoxProps,\n  composeRenderProps,\n  Input as AriaInput,\n  type InputProps as AriaInputProps,\n  ListBox as AriaListBox,\n  type ListBoxProps as AriaListBoxProps,\n  type PopoverProps as AriaPopoverProps,\n  Text,\n  type ValidationResult as AriaValidationResult,\n} from 'react-aria-components';\n\nimport { cn } from '~/lib/utils';\n\nimport { Button } from './button';\nimport { FieldError, FieldGroup, Label } from './field';\nimport { Icons } from './icons';\nimport {\n  ListBoxCollection,\n  ListBoxHeader,\n  ListBoxItem,\n  ListBoxSection,\n} from './list-box';\nimport { Popover } from './popover';\n\n/**\n * A custom combobox component.\n */\nconst Combobox = AriaComboBox;\n\n/**\n * Represents an item in a combobox.\n */\nconst ComboboxItem = ListBoxItem;\n\n/**\n * Represents the header component for a combobox.\n */\nconst ComboboxHeader = ListBoxHeader;\n\n/**\n * ComboboxSection is an alias for ListBoxSection.\n */\nconst ComboboxSection = ListBoxSection;\n\n/**\n * ComboboxCollection is an alias for ListBoxCollection.\n * It represents a collection of items for a combobox component.\n */\nconst ComboboxCollection = ListBoxCollection;\n\n/**\n * Renders a combobox input component.\n *\n * @component\n * @param {AriaInputProps} props - The input props.\n * @param {string} [props.className] - The class name for the combobox input.\n * @returns {JSX.Element} The rendered combobox input component.\n */\nfunction ComboboxInput({ className, ...props }: AriaInputProps): JSX.Element {\n  return (\n    <AriaInput\n      className={composeRenderProps(className, (className) =>\n        cn(\n          'flex h-10 w-full bg-background px-3 py-2 outline-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground',\n          /* Disabled */\n          'data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50',\n          className,\n        ),\n      )}\n      {...props}\n    />\n  );\n}\n\n/**\n * Renders a popover component for the Combobox.\n *\n * @component\n * @param {AriaPopoverProps} props - Additional props for the popover.\n * @param {string} [props.className] - The class name for the popover component.\n * @returns {JSX.Element} The rendered popover component.\n */\nfunction ComboboxPopover({\n  className,\n  ...props\n}: AriaPopoverProps): JSX.Element {\n  return (\n    <Popover\n      className={composeRenderProps(className, (className) =>\n        cn('w-[calc(var(--trigger-width)+4px)]', className),\n      )}\n      {...props}\n    />\n  );\n}\n\n/**\n * Renders a list box for the Combobox component.\n *\n * @component\n * @template T - The type of the items in the list box.\n * @param {AriaListBoxProps<T>} props - The props for the list box.\n * @param {string} [props.className] - The class name for the list box component.\n * @returns {JSX.Element} - The rendered list box component.\n */\nfunction ComboboxListBox<T extends object>({\n  className,\n  ...props\n}: AriaListBoxProps<T>): JSX.Element {\n  return (\n    <AriaListBox\n      className={composeRenderProps(className, (className) =>\n        cn(\n          'max-h-[inherit] overflow-auto p-1 outline-none [clip-path:inset(0_0_0_0_round_calc(var(--radius)-2px))]',\n          className,\n        ),\n      )}\n      {...props}\n    />\n  );\n}\n\n/**\n * Props for the GroveComboBox component.\n *\n * @template T - The type of the items in the combobox.\n * @property {string} [label] - The label for the combobox.\n * @property {string | null} [description] - The description for the combobox.\n * @property {string | ((validation: AriaValidationResult) => string)} [errorMessage] - The error message for the combobox.\n * @property {React.ReactNode | ((item: T) => React.ReactNode)} children - The children of the combobox.\n */\ntype GroveComboBoxProps<T extends object> = {\n  label?: string;\n  description?: string | null;\n  errorMessage?: string | ((validation: AriaValidationResult) => string);\n  children: React.ReactNode | ((item: T) => React.ReactNode);\n} & Omit<AriaComboBoxProps<T>, 'children'>;\n\n/**\n * Renders a GroveComboBox component.\n *\n * @template T - The type of object for the GroveComboBox.\n * @param {GroveComboBoxProps<T>} props - The props for the GroveComboBox component.\n * @param {string} [props.label] - The label for the GroveComboBox component.\n * @param {string | null} [props.description] - The description for the GroveComboBox component.\n * @param {string | ((validation: AriaValidationResult) => string)} [props.errorMessage] - The error message for the GroveComboBox component.\n * @param {string} [props.className] - The class name for the GroveComboBox component.\n * @param {React.ReactNode | ((item: T) => React.ReactNode)} [props.children] - The children of the GroveComboBox component.\n * @returns {JSX.Element} - The rendered GroveComboBox component.\n */\nfunction GroveComboBox<T extends object>({\n  label,\n  description,\n  errorMessage,\n  className,\n  children,\n  ...props\n}: GroveComboBoxProps<T>): JSX.Element {\n  return (\n    <Combobox\n      className={composeRenderProps(className, (className) =>\n        cn('group flex flex-col gap-2', className),\n      )}\n      {...props}\n    >\n      <Label>{label}</Label>\n      <FieldGroup className=\"p-0\">\n        <ComboboxInput />\n        <Button className=\"mr-1 size-6 p-1\" size=\"icon\" variant=\"ghost\">\n          <Icons.ChevronsUpDown aria-hidden className=\"size-4 opacity-50\" />\n        </Button>\n      </FieldGroup>\n      {description && (\n        <Text className=\"text-sm text-muted-foreground\" slot=\"description\">\n          {description}\n        </Text>\n      )}\n      <FieldError>{errorMessage}</FieldError>\n      <ComboboxPopover>\n        <ComboboxListBox>{children}</ComboboxListBox>\n      </ComboboxPopover>\n    </Combobox>\n  );\n}\n\nexport type { GroveComboBoxProps };\nexport {\n  Combobox,\n  ComboboxCollection,\n  ComboboxHeader,\n  ComboboxInput,\n  ComboboxItem,\n  ComboboxListBox,\n  ComboboxPopover,\n  ComboboxSection,\n  GroveComboBox,\n};\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}
